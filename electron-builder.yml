appId: com.lawran.lawranpad
productName: LawranPad
copyright: Copyright Â© 2024 Lawran

# Directories
directories:
  buildResources: build
  output: dist
  app: .

# Build Settings
asar: true
compression: maximum
removePackageScripts: true

# CRITICAL FIX: Disable auto-rebuild because you use 'postinstall' script
npmRebuild: false

# Files to include
files:
  - "out/**/*"
  - "!out/main/*.map"
  - "!out/preload/*.map"
  - "!out/renderer/*.map"
  - "node_modules/**/*"
  - "!node_modules/**/test/**"
  - "!node_modules/**/*.md"
  - "package.json"

asarUnpack:
  - "node_modules/better-sqlite3"
  - "node_modules/@tailwindcss/oxide-win32-x64-msvc"

# Windows Configuration
win:
  target:
    - target: nsis
      arch: [x64]
  icon: build/icon.ico
  publisherName: Lawran
  requestedExecutionLevel: asInvoker
  artifactName: ${productName}-Setup-${version}.${ext}

# NSIS Installer Configuration
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  installerIcon: build/icon.ico
  uninstallerIcon: build/icon.ico
  installerHeaderIcon: build/icon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: LawranPad
  license: build/license.txt
  warningsAsErrors: false
  differentialPackage: false
  displayLanguageSelector: false
  menuCategory: true

# File Associations
fileAssociations:
  - ext: txt
    name: Text Document
    description: Plain Text Document
    icon: build/icon.ico
    role: Editor
  - ext: md
    name: Markdown Document
    description: Markdown Document
    icon: build/icon.ico
    role: Editor
